{
  "openapi": "3.1.0",
  "info": {
    "title": "NullBridge MCP - Cross-Chain Asset Bridge",
    "description": "Cross-Chain Asset Bridge Agent using thirdweb - Bridge assets across multiple blockchain networks",
    "version": "1.0.0",
    "contact": {
      "name": "ENVXX",
      "url": "https://github.com/envexx/NullBridge"
    }
  },
  "servers": [
    {
      "url": "https://nullbridge.vercel.app",
      "description": "NullBridge MCP Production Server"
    }
  ],
  "paths": {
    "/mcp": {
      "get": {
        "summary": "MCP Server Info",
        "description": "Get MCP server information and available tools",
        "operationId": "getMCPInfo",
        "responses": {
          "200": {
            "description": "MCP server information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MCPServerInfo"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Execute MCP Tools",
        "description": "Execute MCP tools for cross-chain bridge operations using thirdweb",
        "operationId": "executeMCPTool",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MCPRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tool execution result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MCPResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update DeFi Action Status",
        "description": "Update the status of a previously prepared DeFi action (e.g., after wallet signing)",
        "operationId": "updateDeFiActionStatus",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ActionStatusUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated action status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActionStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/bridge-asset": {
      "post": {
        "summary": "Bridge Asset Across Chains",
        "description": "Bridge/swap assets across different blockchain networks using thirdweb. Returns a confirmation URL for manual transaction confirmation.",
        "operationId": "bridgeAsset",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BridgeAssetRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bridge transaction result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BridgeAssetResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/transfer": {
      "post": {
        "summary": "Transfer Tokens",
        "description": "Transfer tokens between wallets with fee estimation",
        "operationId": "transferTokens",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TransferRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transfer result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransferResult"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/sign-request": {
      "post": {
        "summary": "Sign Transaction Request",
        "description": "Generate transaction for wallet signing",
        "operationId": "signTransactionRequest",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transaction to sign",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "MCPServerInfo": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "NullBridge MCP"
          },
          "version": {
            "type": "string",
            "example": "1.0.0"
          },
          "description": {
            "type": "string",
            "example": "Cross-Chain Asset Bridge Agent using thirdweb"
          },
          "tools": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["bridge_asset"]
          }
        }
      },
      "MCPRequest": {
        "type": "object",
        "properties": {
          "method": {
            "type": "string",
            "enum": ["tools/call", "resources/read"]
          },
          "params": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "arguments": {
                "type": "object"
              }
            }
          }
        }
      },
      "MCPResponse": {
        "type": "object",
        "properties": {
          "content": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["text", "resource"]
                },
                "text": {
                  "type": "string"
                },
                "resource": {
                  "type": "object"
                }
              }
            }
          },
          "isError": {
            "type": "boolean"
          }
        }
      },
      "BridgeAssetRequest": {
        "type": "object",
        "properties": {
          "fromChainId": {
            "type": "number",
            "description": "ID of the source chain (e.g., 42161 for Arbitrum, 8453 for Base, 1 for Ethereum)",
            "example": 42161
          },
          "toChainId": {
            "type": "number",
            "description": "ID of the destination chain (e.g., 8453 for Base, 42161 for Arbitrum, 1 for Ethereum)",
            "example": 8453
          },
          "fromTokenAddress": {
            "type": "string",
            "description": "Address of the token to swap from (use 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE for native tokens like ETH, MATIC)",
            "example": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"
          },
          "toTokenAddress": {
            "type": "string",
            "description": "Address of the token to swap to",
            "example": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"
          },
          "amount": {
            "type": "string",
            "description": "Amount of tokens to swap in human-readable format (e.g., '0.5', '1.0')",
            "example": "0.1"
          },
          "toAddress": {
            "type": "string",
            "pattern": "^0x[a-fA-F0-9]{40}$",
            "description": "Wallet address that will receive the assets (optional)",
            "example": "0x742d35Cc6634C0532925a3b8D0b4E4f7E1D4D4f4"
          },
          "confirmed": {
            "type": "boolean",
            "description": "Whether the transaction is confirmed (default: false, returns confirmation URL)",
            "example": false,
            "default": false
          }
        },
        "required": ["fromChainId", "toChainId", "fromTokenAddress", "toTokenAddress", "amount"]
      },
      "BridgeAssetResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["pending_confirmation", "success", "failed"],
            "description": "Status of the bridge transaction",
            "example": "pending_confirmation"
          },
          "message": {
            "type": "string",
            "description": "Human-readable message about the transaction status",
            "example": "Please confirm the transaction via the confirmation URL."
          },
          "confirmationUrl": {
            "type": "string",
            "description": "URL for manual transaction confirmation (only when status is pending_confirmation)",
            "example": "https://nullbridge.vercel.app/bridge/confirm?fromChainId=42161&toChainId=8453&..."
          },
          "transactionId": {
            "type": "string",
            "description": "Transaction ID from thirdweb (only when status is success)",
            "example": "tx_abc123"
          },
          "transactionHash": {
            "type": "string",
            "description": "Blockchain transaction hash (only when status is success)",
            "example": "0x1234567890abcdef..."
          },
          "explorerUrl": {
            "type": "string",
            "description": "URL to view transaction on blockchain explorer (only when status is success)",
            "example": "https://arbiscan.io/tx/0x1234..."
          },
          "error": {
            "type": "string",
            "description": "Error message (only when status is failed)",
            "example": "Insufficient balance for transaction"
          }
        }
      }
    }
  }
}
